<div class="card-body bg-glass">
    <p>
        <button class="anchorDetail btn btn-info btn-sm" data-url="/Subcategories/_Create" data-bs-toggle="model" data-target="#myModal">Create</button>
    </p>

    <table class="table" id="cattable">
        <thead>
            <tr>
                <th>
                    SubCatagory
                </th>
                <th>
                    Catagory
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>

            @foreach (var item in ViewBag.Subcatagory)
            {
                <tr>
                    <td>
                        @item.SubCatname
                    </td>
                    <td>
                        @item.category.Catname
                    </td>
                    <td>
                        <button href="#" class="anchorDetail btn btn-success btn-sm" data-url="/Subcategories/Edit" data-id="@item.SubCatID" data-bs-toggle="model" data-target="#myModal">Edit</button>

                        <button class="anchorDetail btn btn-info btn-sm" data-url="/Subcategories/Details" data-id="@item.SubCatID" data-bs-toggle="model" data-target="#myModal">Details</button>
                        <button id="Deletes" class="btn btn-danger btn-sm" data-url="/Subcategories/DeleteConfirmed/" data-id="@item.SubCatID">Delete</button>

                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
<script>

    $(document).ready(function () {
        $('#cattable').DataTable();
    });

</script>

<script src="~/Scripts/jquery-3.6.1.js"></script>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="~/Scripts/_delete.js"></script>
<script>

    $(function () {
        $("#Deletes").click(function () {

            var id = $(this).attr('data-id');
            var url = $(this).attr('data-url');

            Swal.fire({
                icon: 'warning',
                title: 'Are you sure you want to delete this record?',
                showDenyButton: false,
                showCancelButton: true,
                confirmButtonText: 'Yes'
            }).then((result) => {
                /* Read more about isConfirmed, isDenied below */
                if (result.isConfirmed) {


                    // Ajax config
                    $.ajax({
                        type: "POST", //we are using GET method to get data from server side
                        url: url + id, // get the route value
                        contentType: "application/json; charset=utf-8",
                        dataType: "json", //set data
                        beforeSend: function () {//We add this before send to disable the button once we submit it so that we prevent the multiple click

                        },
                        success: function (response) {//once the request successfully process to the server side it will return result here
                            // Reload lists of employees
                            if (response.success) {

                                Swal.fire('Success.', response, 'success')
                                location.reload(true);
                            } else {

                                Swal.fire('Warning', response, 'Warning')
                            }
                        }
                    });


                } else if (result.isDenied) {
                    Swal.fire('Changes are not saved', '', 'info')
                }
            });

        });
    });
</script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fomantic-ui/2.8.8/semantic.min.css" />
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/dataTables.semanticui.min.css" />
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.1/js/dataTables.semanticui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fomantic-ui/2.8.8/semantic.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

